
---
title: 'Step 2: Simple Presentation with Real Data'
output: html_document
---

# Simple Presentation with Real Data

## 1. Data Overview

```{r data-overview}
cat('=== REAL DATA OVERVIEW ===\n')
if (!is.null(positional_data)) {
  cat('Positional analysis data:', nrow(positional_data), 'positions\n')
  cat('Significant positions:', sum(positional_data$significant), '\n')
} else {
  cat('Positional data not available\n')
}

if (!is.null(oxidative_summary)) {
  cat('\nOxidative load summary:\n')
  print(oxidative_summary)
} else {
  cat('Oxidative summary not available\n')
}

if (!is.null(sample_metrics)) {
  cat('\nSample metrics:', nrow(sample_metrics), 'samples\n')
} else {
  cat('Sample metrics not available\n')
}
```

## 2. Real Positional Analysis

```{r positional-analysis, fig.cap='Real positional analysis results'}
if (!is.null(positional_data)) {
  # Create a simple plot with real data
  p <- ggplot(positional_data, aes(x = pos, y = frac_als - frac_control)) +
    geom_col(aes(fill = significant), alpha = 0.8) +
    geom_text(aes(label = ifelse(significant, '***', 'ns')), 
              vjust = ifelse(positional_data$frac_als - positional_data$frac_control > 0, -0.5, 1.5)) +
    scale_fill_manual(values = c('TRUE' = 'red', 'FALSE' = 'gray')) +
    labs(title = 'Real Positional Analysis: G>T Differences (ALS - Control)',
         x = 'miRNA Position', y = 'Difference in G>T Fraction',
         fill = 'Significant') +
    theme_minimal() +
    scale_x_continuous(breaks = 1:23)
  
  print(p)
} else {
  cat('Positional data not available for plotting')
}
```

## 3. Real Oxidative Load Analysis

```{r oxidative-analysis, fig.cap='Real oxidative load comparison'}
if (!is.null(oxidative_summary)) {
  # Create oxidative load plot with real data
  p <- ggplot(oxidative_summary, aes(x = group, y = mean_vaf, fill = group)) +
    geom_col(alpha = 0.8) +
    geom_text(aes(label = paste0('VAF = ', round(mean_vaf, 4))), 
              vjust = -0.5, size = 4) +
    scale_fill_manual(values = c('ALS' = 'red', 'Control' = 'blue')) +
    labs(title = 'Real Oxidative Load: ALS vs Control',
         x = 'Group', y = 'Mean VAF') +
    theme_minimal() +
    theme(legend.position = 'none')
  
  print(p)
} else {
  cat('Oxidative data not available for plotting')
}
```

## 4. Real Sample Distribution

```{r sample-distribution, fig.cap='Real sample distribution'}
if (!is.null(sample_metrics)) {
  # Create sample distribution plot
  sample_counts <- sample_metrics %>%
    group_by(group) %>%
    summarise(n = n(), .groups = 'drop')
  
  p <- ggplot(sample_counts, aes(x = group, y = n, fill = group)) +
    geom_col(alpha = 0.8) +
    geom_text(aes(label = paste0('n = ', n)), vjust = -0.5, size = 5) +
    scale_fill_manual(values = c('ALS' = 'red', 'Control' = 'blue')) +
    labs(title = 'Real Sample Distribution',
         x = 'Group', y = 'Number of Samples') +
    theme_minimal() +
    theme(legend.position = 'none')
  
  print(p)
} else {
  cat('Sample data not available for plotting')
}
```

## 5. Real Statistical Results

```{r statistical-results}
if (!is.null(positional_data)) {
  # Show real statistical results
  significant_positions <- positional_data %>%
    filter(significant == TRUE) %>%
    select(pos, frac_als, frac_control, p_value, p_adj) %>%
    arrange(p_adj)
  
  cat('=== REAL STATISTICAL RESULTS ===\n')
  cat('Significant positions (p_adj < 0.05):\n')
  print(significant_positions)
} else {
  cat('Statistical results not available')
}
```

## 6. Include Existing Figures

```{r include-existing-figures, fig.cap='Existing analysis figures'}
# Let's include some of our existing PDF figures
pdf_files <- list.files('.', pattern = '\\.pdf$')
if (length(pdf_files) > 0) {
  cat('Including existing figure:', pdf_files[1], '\n')
  knitr::include_graphics(pdf_files[1])
} else {
  cat('No PDF figures found')
}
```

## Summary

This simple presentation demonstrates:
1. **Real data loading** from our analysis files
2. **Real plots** generated from actual data
3. **Real statistical results** with actual p-values
4. **Existing figures** included from our analysis
5. **Working HTML output** with embedded figures

Next step: Add more comprehensive analysis and styling.

